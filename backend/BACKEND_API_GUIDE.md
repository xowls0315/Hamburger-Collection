# ë°±ì—”ë“œ API ì™„ì„±ë„ ì ê²€ ë° Postman í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ“‹ í˜„ì¬ ë°±ì—”ë“œ êµ¬í˜„ ìƒíƒœ

### âœ… ì´ë¯¸ êµ¬í˜„ ì™„ë£Œëœ ê¸°ëŠ¥
1. **ë¸Œëœë“œ/ë©”ë‰´ API** - ì™„ë£Œ
2. **ë§¤ì¥ ê²€ìƒ‰ API** - ì™„ë£Œ
3. **ì¸ì¦ API (ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸)** - ì™„ë£Œ
4. **ê²Œì‹œíŒ API (CRUD)** - ì™„ë£Œ
5. **ëŒ“ê¸€ API (CRUD)** - ì™„ë£Œ

---

## ğŸ”§ ë°±ì—”ë“œì—ì„œ ì¶”ê°€ë¡œ í™•ì¸/ìˆ˜ì •í•´ì•¼ í•  ì‚¬í•­

### 1. JWT ì¸ì¦ ë°©ì‹ ê°œì„  (Postman í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´)

í˜„ì¬ JWT ì „ëµì´ **ì¿ í‚¤ì—ì„œë§Œ** í† í°ì„ ì½ë„ë¡ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. Postman í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ **Authorization í—¤ë”ë„ ì§€ì›**í•˜ë„ë¡ ìˆ˜ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

**íŒŒì¼**: `src/auth/strategies/jwt.strategy.ts`

**í˜„ì¬ ì½”ë“œ**:
```typescript
jwtFromRequest: ExtractJwt.fromExtractors([
  (request) => {
    return request?.cookies?.accessToken;
  },
]),
```

**ìˆ˜ì • ì œì•ˆ**:
```typescript
jwtFromRequest: ExtractJwt.fromExtractors([
  ExtractJwt.fromAuthHeaderAsBearerToken(), // Authorization: Bearer <token>
  (request) => {
    return request?.cookies?.accessToken; // ì¿ í‚¤ì—ì„œë„ ì½ê¸° (í”„ë¡ íŠ¸ì—”ë“œìš©)
  },
]),
```

### 2. `/auth/me` ì—”ë“œí¬ì¸íŠ¸ í™•ì¸

í˜„ì¬ `/auth/me`ëŠ” `@UseGuards(JwtAuthGuard)`ë¡œ ë³´í˜¸ë˜ì–´ ìˆê³ , `req.user`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ëŠ” ì •ìƒì…ë‹ˆë‹¤.

### 3. ê²Œì‹œíŒ/ëŒ“ê¸€ ê¶Œí•œ í™•ì¸

- âœ… **ì¡°íšŒ (GET)**: Guardê°€ ì—†ì–´ì„œ **ê²ŒìŠ¤íŠ¸ë„ ê°€ëŠ¥** (ì •ìƒ)
- âœ… **ì‘ì„±/ìˆ˜ì •/ì‚­ì œ**: `@UseGuards(JwtAuthGuard)`ë¡œ **ë¡œê·¸ì¸ í•„ìš”** (ì •ìƒ)

### 4. CORS ì„¤ì • í™•ì¸

`main.ts`ì—ì„œ CORSê°€ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:
- `origin: http://localhost:3000` (í”„ë¡ íŠ¸ì—”ë“œ)
- `credentials: true` (ì¿ í‚¤ ì „ì†¡ í—ˆìš©)

---

## ğŸ“ Postman í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

Postmanì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì„¸ìš”:
- `baseUrl`: `http://localhost:3001`
- `accessToken`: (ë¡œê·¸ì¸ í›„ ìë™ìœ¼ë¡œ ì„¤ì •)

---

### 1ï¸âƒ£ ë¸Œëœë“œ/ë©”ë‰´ API í…ŒìŠ¤íŠ¸

#### 1-1. ëª¨ë“  ë¸Œëœë“œ ì¡°íšŒ
```
GET {{baseUrl}}/brands
```

**ì˜ˆìƒ ì‘ë‹µ**:
```json
[
  {
    "id": "...",
    "slug": "mcdonalds",
    "name": "ë§¥ë„ë‚ ë“œ",
    "logoUrl": "..."
  },
  ...
]
```

#### 1-2. íŠ¹ì • ë¸Œëœë“œ ì¡°íšŒ
```
GET {{baseUrl}}/brands/mcdonalds
```

#### 1-3. ë¸Œëœë“œë³„ ë©”ë‰´ ëª©ë¡ ì¡°íšŒ
```
GET {{baseUrl}}/brands/mcdonalds/menu-items?page=1&limit=20
```

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
- `category` (ì„ íƒ): `burger`, `chicken`, `side`, `drink` ë“±
- `sort` (ì„ íƒ): `kcal_asc`, `kcal_desc` ë“±
- `page` (ì„ íƒ): ê¸°ë³¸ê°’ 1
- `limit` (ì„ íƒ): ê¸°ë³¸ê°’ 20

#### 1-4. ë©”ë‰´ ìƒì„¸ ì¡°íšŒ
```
GET {{baseUrl}}/menu-items/{menuItemId}
```

**ì˜ˆìƒ ì‘ë‹µ**:
```json
{
  "id": "...",
  "name": "ë¹…ë§¥",
  "category": "burger",
  "imageUrl": "...",
  "detailUrl": "...",
  "description": "...",
  "nutrition": {
    "kcal": 550,
    "protein": 25,
    "saturatedFat": 10,
    "sodium": 1000,
    "sugar": 9
  }
}
```

---

### 2ï¸âƒ£ ë§¤ì¥ ê²€ìƒ‰ API í…ŒìŠ¤íŠ¸

#### 2-1. ì£¼ë³€ ë§¤ì¥ ê²€ìƒ‰
```
GET {{baseUrl}}/stores/search?brandSlug=mcdonalds&lat=37.5665&lng=126.9780&radius=5000
```

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
- `brandSlug` (í•„ìˆ˜): `mcdonalds`, `burgerking`, `lotteria` ë“±
- `lat` (í•„ìˆ˜): ìœ„ë„ (ì˜ˆ: 37.5665)
- `lng` (í•„ìˆ˜): ê²½ë„ (ì˜ˆ: 126.9780)
- `radius` (ì„ íƒ): ê²€ìƒ‰ ë°˜ê²½(ë¯¸í„°), ê¸°ë³¸ê°’ 5000

**ì˜ˆìƒ ì‘ë‹µ**:
```json
[
  {
    "id": "12345678",
    "name": "ë§¥ë„ë‚ ë“œ ê°•ë‚¨ì ",
    "address": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ...",
    "roadAddress": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ ...",
    "phone": "02-1234-5678",
    "placeUrl": "https://place.map.kakao.com/...",
    "distance": 500,
    "lat": 37.5665,
    "lng": 126.9780
  },
  ...
]
```

**í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤**:
1. ì„œìš¸ì‹œì²­ ì¢Œí‘œë¡œ í…ŒìŠ¤íŠ¸: `lat=37.5665&lng=126.9780`
2. ë‹¤ë¥¸ ë¸Œëœë“œë¡œ í…ŒìŠ¤íŠ¸: `brandSlug=burgerking`
3. ë°˜ê²½ ì¡°ì • í…ŒìŠ¤íŠ¸: `radius=1000` (1km)

---

### 3ï¸âƒ£ ì¸ì¦ API í…ŒìŠ¤íŠ¸

#### 3-1. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œì‘
```
GET {{baseUrl}}/auth/kakao
```
**ì£¼ì˜**: ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì ‘ì†í•´ì•¼ ë¦¬ë‹¤ì´ë ‰íŠ¸ë©ë‹ˆë‹¤.

#### 3-2. ì¹´ì¹´ì˜¤ ì½œë°± (ë¸Œë¼ìš°ì €ì—ì„œ)
ë¸Œë¼ìš°ì €ì—ì„œ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í›„ ì½œë°± URLë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë©ë‹ˆë‹¤.
```
GET {{baseUrl}}/auth/kakao/callback?code={ì¸ì¦ì½”ë“œ}
```

**ì˜ˆìƒ ì‘ë‹µ**:
```json
{
  "success": true,
  "message": "ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì„±ê³µ",
  "user": {
    "id": "...",
    "kakaoId": "...",
    "nickname": "í™ê¸¸ë™",
    "profileImage": "...",
    "role": "user"
  },
  "tokens": {
    "accessToken": "...",
    "refreshToken": "..."
  }
}
```

**Postman í…ŒìŠ¤íŠ¸ ë°©ë²•**:
1. ì‘ë‹µì—ì„œ `accessToken`ì„ ë³µì‚¬
2. í™˜ê²½ ë³€ìˆ˜ `accessToken`ì— ì €ì¥
3. ë˜ëŠ” Authorization í—¤ë”ì— ì§ì ‘ ì„¤ì •

#### 3-3. ë‚´ ì •ë³´ ì¡°íšŒ (ë¡œê·¸ì¸ í•„ìš”)
```
GET {{baseUrl}}/auth/me
Authorization: Bearer {{accessToken}}
```

**ë˜ëŠ” ì¿ í‚¤ ì‚¬ìš©** (ë¸Œë¼ìš°ì €ì—ì„œ):
- ì¿ í‚¤ì— `accessToken`ì´ ìë™ìœ¼ë¡œ ì„¤ì •ë¨

**ì˜ˆìƒ ì‘ë‹µ**:
```json
{
  "id": "...",
  "kakaoId": "...",
  "nickname": "í™ê¸¸ë™",
  "profileImage": "...",
  "role": "user"
}
```

#### 3-4. í† í° ê°±ì‹ 
```
POST {{baseUrl}}/auth/refresh
```
**ì£¼ì˜**: ì¿ í‚¤ì— `refreshToken`ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

#### 3-5. ë¡œê·¸ì•„ì›ƒ
```
POST {{baseUrl}}/auth/logout
```

---

### 4ï¸âƒ£ ê²Œì‹œíŒ API í…ŒìŠ¤íŠ¸

#### 4-1. ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (ê²ŒìŠ¤íŠ¸ ê°€ëŠ¥)
```
GET {{baseUrl}}/posts?page=1&limit=20
```

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°**:
- `page` (ì„ íƒ): ê¸°ë³¸ê°’ 1
- `limit` (ì„ íƒ): ê¸°ë³¸ê°’ 20

**ì˜ˆìƒ ì‘ë‹µ**:
```json
{
  "posts": [
    {
      "id": "...",
      "title": "ë§¥ë„ë‚ ë“œ ë¹…ë§¥ ì¶”ì²œí•©ë‹ˆë‹¤!",
      "content": "...",
      "viewCount": 10,
      "createdAt": "2024-01-01T00:00:00.000Z",
      "user": {
        "id": "...",
        "nickname": "í™ê¸¸ë™"
      }
    },
    ...
  ],
  "total": 50,
  "page": 1,
  "limit": 20,
  "totalPages": 3
}
```

#### 4-2. ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (ê²ŒìŠ¤íŠ¸ ê°€ëŠ¥)
```
GET {{baseUrl}}/posts/{postId}
```

**ì˜ˆìƒ ì‘ë‹µ**:
```json
{
  "id": "...",
  "title": "ë§¥ë„ë‚ ë“œ ë¹…ë§¥ ì¶”ì²œí•©ë‹ˆë‹¤!",
  "content": "ì •ë§ ë§›ìˆì–´ìš”...",
  "viewCount": 11,
  "createdAt": "2024-01-01T00:00:00.000Z",
  "user": {
    "id": "...",
    "nickname": "í™ê¸¸ë™"
  },
  "comments": [
    {
      "id": "...",
      "content": "ì €ë„ ì¢‹ì•„í•´ìš”!",
      "createdAt": "2024-01-01T01:00:00.000Z",
      "user": {
        "id": "...",
        "nickname": "ê¹€ì² ìˆ˜"
      }
    }
  ]
}
```

#### 4-3. ê²Œì‹œê¸€ ì‘ì„± (ë¡œê·¸ì¸ í•„ìš”)
```
POST {{baseUrl}}/posts
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "ë§¥ë„ë‚ ë“œ ë¹…ë§¥ ì¶”ì²œí•©ë‹ˆë‹¤!",
  "content": "ì •ë§ ë§›ìˆì–´ìš”. íŠ¹íˆ íŒ¨í‹°ê°€ ë‘êº¼ì›Œì„œ ë§Œì¡±ìŠ¤ëŸ½ìŠµë‹ˆë‹¤."
}
```

**ê²€ì¦ ê·œì¹™**:
- `title`: ìµœì†Œ 1ì
- `content`: ìµœì†Œ 10ì

**ì˜ˆìƒ ì‘ë‹µ**:
```json
{
  "id": "...",
  "title": "ë§¥ë„ë‚ ë“œ ë¹…ë§¥ ì¶”ì²œí•©ë‹ˆë‹¤!",
  "content": "...",
  "userId": "...",
  "viewCount": 0,
  "createdAt": "2024-01-01T00:00:00.000Z"
}
```

#### 4-4. ê²Œì‹œê¸€ ìˆ˜ì • (ë¡œê·¸ì¸ í•„ìš”, ë³¸ì¸ë§Œ)
```
PATCH {{baseUrl}}/posts/{postId}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "title": "ìˆ˜ì •ëœ ì œëª©",
  "content": "ìˆ˜ì •ëœ ë‚´ìš©ì…ë‹ˆë‹¤."
}
```

**ì—ëŸ¬ ì¼€ì´ìŠ¤**:
- 401: ë¡œê·¸ì¸ í•„ìš”
- 403: ë³¸ì¸ ê²Œì‹œê¸€ì´ ì•„ë‹˜
- 404: ê²Œì‹œê¸€ ì—†ìŒ

#### 4-5. ê²Œì‹œê¸€ ì‚­ì œ (ë¡œê·¸ì¸ í•„ìš”, ë³¸ì¸ë§Œ)
```
DELETE {{baseUrl}}/posts/{postId}
Authorization: Bearer {{accessToken}}
```

---

### 5ï¸âƒ£ ëŒ“ê¸€ API í…ŒìŠ¤íŠ¸

#### 5-1. ëŒ“ê¸€ ëª©ë¡ ì¡°íšŒ (ê²ŒìŠ¤íŠ¸ ê°€ëŠ¥)
```
GET {{baseUrl}}/posts/{postId}/comments
```

**ì˜ˆìƒ ì‘ë‹µ**:
```json
[
  {
    "id": "...",
    "content": "ì €ë„ ì¢‹ì•„í•´ìš”!",
    "createdAt": "2024-01-01T01:00:00.000Z",
    "user": {
      "id": "...",
      "nickname": "ê¹€ì² ìˆ˜"
    }
  },
  ...
]
```

#### 5-2. ëŒ“ê¸€ ì‘ì„± (ë¡œê·¸ì¸ í•„ìš”)
```
POST {{baseUrl}}/posts/{postId}/comments
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "content": "ì €ë„ ì¢‹ì•„í•´ìš”!"
}
```

**ê²€ì¦ ê·œì¹™**:
- `content`: ìµœì†Œ 1ì

#### 5-3. ëŒ“ê¸€ ìˆ˜ì • (ë¡œê·¸ì¸ í•„ìš”, ë³¸ì¸ë§Œ)
```
PATCH {{baseUrl}}/posts/{postId}/comments/{commentId}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "content": "ìˆ˜ì •ëœ ëŒ“ê¸€ì…ë‹ˆë‹¤."
}
```

#### 5-4. ëŒ“ê¸€ ì‚­ì œ (ë¡œê·¸ì¸ í•„ìš”, ë³¸ì¸ë§Œ)
```
DELETE {{baseUrl}}/posts/{postId}/comments/{commentId}
Authorization: Bearer {{accessToken}}
```

---

## ğŸ§ª Postman í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ë³¸ API í…ŒìŠ¤íŠ¸
- [ ] ë¸Œëœë“œ ëª©ë¡ ì¡°íšŒ
- [ ] íŠ¹ì • ë¸Œëœë“œ ì¡°íšŒ
- [ ] ë¸Œëœë“œë³„ ë©”ë‰´ ëª©ë¡ ì¡°íšŒ
- [ ] ë©”ë‰´ ìƒì„¸ ì¡°íšŒ (ì˜ì–‘ì •ë³´ í¬í•¨)

### ë§¤ì¥ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸
- [ ] ì£¼ë³€ ë§¤ì¥ ê²€ìƒ‰ (ì„œìš¸ì‹œì²­ ê¸°ì¤€)
- [ ] ë‹¤ë¥¸ ë¸Œëœë“œë¡œ ê²€ìƒ‰
- [ ] ë°˜ê²½ ì¡°ì • í…ŒìŠ¤íŠ¸

### ì¸ì¦ í…ŒìŠ¤íŠ¸
- [ ] ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (ë¸Œë¼ìš°ì €)
- [ ] `/auth/me` ì¡°íšŒ (í† í° í•„ìš”)
- [ ] í† í° ì—†ì´ `/auth/me` ì ‘ê·¼ ì‹œ 401 ì—ëŸ¬ í™•ì¸
- [ ] ë¡œê·¸ì•„ì›ƒ

### ê²Œì‹œíŒ í…ŒìŠ¤íŠ¸ (ê²ŒìŠ¤íŠ¸ ëª¨ë“œ)
- [ ] ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ (í† í° ì—†ì´)
- [ ] ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ (í† í° ì—†ì´)
- [ ] ëŒ“ê¸€ ëª©ë¡ ì¡°íšŒ (í† í° ì—†ì´)

### ê²Œì‹œíŒ í…ŒìŠ¤íŠ¸ (ë¡œê·¸ì¸ ëª¨ë“œ)
- [ ] ê²Œì‹œê¸€ ì‘ì„±
- [ ] ë³¸ì¸ ê²Œì‹œê¸€ ìˆ˜ì •
- [ ] ë³¸ì¸ ê²Œì‹œê¸€ ì‚­ì œ
- [ ] íƒ€ì¸ ê²Œì‹œê¸€ ìˆ˜ì • ì‹œë„ â†’ 403 ì—ëŸ¬ í™•ì¸
- [ ] ëŒ“ê¸€ ì‘ì„±
- [ ] ë³¸ì¸ ëŒ“ê¸€ ìˆ˜ì •
- [ ] ë³¸ì¸ ëŒ“ê¸€ ì‚­ì œ
- [ ] íƒ€ì¸ ëŒ“ê¸€ ìˆ˜ì • ì‹œë„ â†’ 403 ì—ëŸ¬ í™•ì¸

---

## ğŸ” ì—ëŸ¬ ì‘ë‹µ ì˜ˆì‹œ

### 401 Unauthorized (ë¡œê·¸ì¸ í•„ìš”)
```json
{
  "statusCode": 401,
  "message": "Unauthorized"
}
```

### 403 Forbidden (ê¶Œí•œ ì—†ìŒ)
```json
{
  "statusCode": 403,
  "message": "You can only update your own posts"
}
```

### 404 Not Found
```json
{
  "statusCode": 404,
  "message": "Post with id {id} not found"
}
```

### 400 Bad Request (ê²€ì¦ ì‹¤íŒ¨)
```json
{
  "statusCode": 400,
  "message": [
    "content must be longer than or equal to 10 characters"
  ],
  "error": "Bad Request"
}
```

---

## ğŸ“Œ ì¤‘ìš” ì‚¬í•­

1. **JWT í† í° ì „ë‹¬ ë°©ì‹**:
   - í”„ë¡ íŠ¸ì—”ë“œ: ì¿ í‚¤ ì‚¬ìš© (ìë™ ì „ì†¡)
   - Postman: Authorization í—¤ë” ì‚¬ìš© (`Bearer {token}`)

2. **ê²ŒìŠ¤íŠ¸ ëª¨ë“œ**:
   - ê²Œì‹œê¸€/ëŒ“ê¸€ ì¡°íšŒëŠ” í† í° ì—†ì´ ê°€ëŠ¥
   - ì‘ì„±/ìˆ˜ì •/ì‚­ì œëŠ” í† í° í•„ìš”

3. **ê¶Œí•œ ì²´í¬**:
   - ë³¸ì¸ ê²Œì‹œê¸€/ëŒ“ê¸€ë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
   - íƒ€ì¸ ê²Œì‹œê¸€ ìˆ˜ì • ì‹œë„ ì‹œ 403 ì—ëŸ¬

4. **í™˜ê²½ ë³€ìˆ˜**:
   - `.env` íŒŒì¼ì— ë‹¤ìŒ ë³€ìˆ˜ë“¤ì´ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:
     - `KAKAO_REST_API_KEY`
     - `KAKAO_REDIRECT_URI`
     - `KAKAO_LOCAL_API_KEY`
     - `JWT_ACCESS_SECRET`
     - `JWT_REFRESH_SECRET`
     - `FRONTEND_URL`

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

ë°±ì—”ë“œ API í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ë©´:
1. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë¸Œëœë“œ/ë©”ë‰´ ì¡°íšŒ êµ¬í˜„
2. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë§¤ì¥ ê²€ìƒ‰ + ì§€ë„ í‘œì‹œ êµ¬í˜„
3. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê²Œì‹œíŒ êµ¬í˜„ (ê²ŒìŠ¤íŠ¸/ë¡œê·¸ì¸ ëª¨ë“œ ë¶„ê¸°)
4. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì—°ë™
